(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{2262:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});var r=a(5155),s=a(2115),c=a(5111),o=a(5371),d=a.n(o);function n(){let[t,e]=(0,s.useState)([]),[a,o]=(0,s.useState)(""),[n,l]=(0,s.useState)(!1),[i,u]=(0,s.useState)(null),[p,m]=(0,s.useState)({name:"",price:"",quantity:"",maxStock:"",category:""}),[_,h]=(0,s.useState)(!0),[x,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{j()},[]);let j=async()=>{h(!0),e(await (0,c.d$)()),h(!1)},b=t.filter(t=>t.name.toLowerCase().includes(a.toLowerCase())||t.category.toLowerCase().includes(a.toLowerCase())),g=async t=>{t.preventDefault(),N(!0);let e={name:p.name,price:Number.parseFloat(p.price),quantity:Number.parseInt(p.quantity),maxStock:Number.parseInt(p.maxStock),category:p.category};i?await (0,c.vc)(i.id,e)&&await j():await (0,c.Bj)(e)&&await j(),N(!1),l(!1),u(null),m({name:"",price:"",quantity:"",maxStock:"",category:""})},y=t=>{u(t),m({name:t.name,price:t.price.toString(),quantity:t.quantity.toString(),maxStock:t.maxStock.toString(),category:t.category}),l(!0)},v=async t=>{confirm("Tem certeza que deseja excluir este produto?")&&await (0,c.DD)(t)&&await j()};return(0,r.jsxs)("div",{className:d().container,children:[(0,r.jsxs)("div",{className:d().header,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:d().title,children:"Produtos"}),(0,r.jsx)("p",{className:d().subtitle,children:"Gerencie seu cat\xe1logo de produtos"})]}),(0,r.jsxs)("button",{onClick:()=>{u(null),m({name:"",price:"",quantity:"",maxStock:"",category:""}),l(!0)},className:d().addButton,children:[(0,r.jsx)("span",{className:d().buttonIcon,children:"➕"}),"Novo Produto"]})]}),(0,r.jsxs)("div",{className:d().card,children:[(0,r.jsxs)("div",{className:d().searchContainer,children:[(0,r.jsx)("span",{className:d().searchIcon,children:"\uD83D\uDD0D"}),(0,r.jsx)("input",{type:"text",placeholder:"Buscar produtos...",value:a,onChange:t=>o(t.target.value),className:d().searchInput})]}),(0,r.jsx)("div",{className:d().productList,children:_?(0,r.jsxs)("div",{className:d().loading,children:[(0,r.jsx)("div",{className:d().spinner}),(0,r.jsx)("p",{children:"Carregando produtos..."})]}):0===b.length?(0,r.jsx)("p",{className:d().emptyState,children:"Nenhum produto encontrado"}):b.map(t=>(0,r.jsxs)("div",{className:d().productItem,children:[(0,r.jsxs)("div",{className:d().productInfo,children:[(0,r.jsx)("h3",{className:d().productName,children:t.name}),(0,r.jsx)("p",{className:d().productCategory,children:t.category})]}),(0,r.jsxs)("div",{className:d().productStats,children:[(0,r.jsxs)("div",{className:d().productStat,children:[(0,r.jsx)("span",{className:d().productStatLabel,children:"Pre\xe7o"}),(0,r.jsxs)("span",{className:d().productStatValue,children:["R$ ",t.price.toFixed(2)]})]}),(0,r.jsxs)("div",{className:d().productStat,children:[(0,r.jsx)("span",{className:d().productStatLabel,children:"Quantidade"}),(0,r.jsxs)("span",{className:d().productStatValue,children:[t.quantity," un."]})]})]}),(0,r.jsxs)("div",{className:d().productActions,children:[(0,r.jsx)("button",{onClick:()=>y(t),className:d().actionButton,children:"✏️"}),(0,r.jsx)("button",{onClick:()=>v(t.id),className:"".concat(d().actionButton," ").concat(d().actionButtonDanger),children:"\uD83D\uDDD1️"})]})]},t.id))})]}),n&&(0,r.jsx)("div",{className:d().modal,onClick:()=>l(!1),children:(0,r.jsxs)("div",{className:d().modalContent,onClick:t=>t.stopPropagation(),children:[(0,r.jsxs)("div",{className:d().modalHeader,children:[(0,r.jsx)("h2",{className:d().modalTitle,children:i?"Editar Produto":"Novo Produto"}),(0,r.jsx)("button",{onClick:()=>l(!1),className:d().modalClose,children:"✕"})]}),(0,r.jsxs)("form",{onSubmit:g,className:d().form,children:[(0,r.jsxs)("div",{className:d().field,children:[(0,r.jsx)("label",{className:d().label,children:"Nome"}),(0,r.jsx)("input",{type:"text",value:p.name,onChange:t=>m({...p,name:t.target.value}),className:d().input,required:!0})]}),(0,r.jsxs)("div",{className:d().field,children:[(0,r.jsx)("label",{className:d().label,children:"Categoria"}),(0,r.jsx)("input",{type:"text",value:p.category,onChange:t=>m({...p,category:t.target.value}),className:d().input,required:!0})]}),(0,r.jsxs)("div",{className:d().fieldRow,children:[(0,r.jsxs)("div",{className:d().field,children:[(0,r.jsx)("label",{className:d().label,children:"Pre\xe7o"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:p.price,onChange:t=>m({...p,price:t.target.value}),className:d().input,required:!0})]}),(0,r.jsxs)("div",{className:d().field,children:[(0,r.jsx)("label",{className:d().label,children:"Quantidade"}),(0,r.jsx)("input",{type:"number",value:p.quantity,onChange:t=>m({...p,quantity:t.target.value}),className:d().input,required:!0})]})]}),(0,r.jsxs)("div",{className:d().field,children:[(0,r.jsx)("label",{className:d().label,children:"Estoque M\xe1ximo"}),(0,r.jsx)("input",{type:"number",value:p.maxStock,onChange:t=>m({...p,maxStock:t.target.value}),className:d().input,required:!0})]}),(0,r.jsxs)("div",{className:d().modalActions,children:[(0,r.jsx)("button",{type:"button",onClick:()=>l(!1),className:d().cancelButton,children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:d().submitButton,children:i?"Salvar":"Criar"})]})]})]})})]})}},5111:(t,e,a)=>{"use strict";a.d(e,{Bj:()=>o,DD:()=>n,TC:()=>l,XV:()=>i,YY:()=>u,d$:()=>c,vc:()=>d});var r=a(8915),s=a(5317);let c=async()=>{try{let t=(0,s.P)((0,s.rJ)(r.db,"products"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(t)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){return console.error("Error getting products:",t),[]}},o=async t=>{try{let e=new Date().toISOString();return{id:(await (0,s.gS)((0,s.rJ)(r.db,"products"),{...t,createdAt:e,updatedAt:e})).id,...t,createdAt:e,updatedAt:e}}catch(t){return console.error("Error adding product:",t),null}},d=async(t,e)=>{try{let a=(0,s.H9)(r.db,"products",t);return await (0,s.mZ)(a,{...e,updatedAt:new Date().toISOString()}),!0}catch(t){return console.error("Error updating product:",t),!1}},n=async t=>{try{return await (0,s.kd)((0,s.H9)(r.db,"products",t)),!0}catch(t){return console.error("Error deleting product:",t),!1}},l=async()=>{try{let t=(0,s.P)((0,s.rJ)(r.db,"movements"),(0,s.My)("createdAt","desc"));return(await (0,s.GG)(t)).docs.map(t=>({id:t.id,...t.data()}))}catch(t){return console.error("Error getting movements:",t),[]}},i=async t=>{try{return{id:(await (0,s.gS)((0,s.rJ)(r.db,"movements"),{...t,createdAt:new Date().toISOString()})).id,...t,createdAt:new Date().toISOString()}}catch(t){return console.error("Error adding movement:",t),null}},u=async(t,e)=>{try{let a=(await c()).find(e=>e.id===t);if(!a)return!1;let r=a.quantity+e;return await d(t,{quantity:r})}catch(t){return console.error("Error updating product quantity:",t),!1}}},5371:t=>{t.exports={container:"products_container__Mgtb0",header:"products_header__vMSqU",title:"products_title__gTQD5",subtitle:"products_subtitle__aorco",addButton:"products_addButton__3ANlR",buttonIcon:"products_buttonIcon__oWhLj",card:"products_card__Vlj7_",searchContainer:"products_searchContainer__Ztl5A",searchIcon:"products_searchIcon__Razku",searchInput:"products_searchInput__X7vT1",productList:"products_productList__43szQ",loading:"products_loading__39Vpz",spinner:"products_spinner__6IQb7",spin:"products_spin__4cCk7",emptyState:"products_emptyState__JGG_p",productItem:"products_productItem__dJjx8",productInfo:"products_productInfo__xK8b0",productName:"products_productName__kbJOW",productCategory:"products_productCategory__CyZ5o",productStats:"products_productStats__7cdmW",productStat:"products_productStat__1gCRz",productStatLabel:"products_productStatLabel__Qht_f",productStatValue:"products_productStatValue__S3Ld4",productActions:"products_productActions__pvusm",actionButton:"products_actionButton__xN1of",actionButtonDanger:"products_actionButtonDanger__zZbfv",modal:"products_modal__djKtP",modalContent:"products_modalContent__9iUb1",modalHeader:"products_modalHeader__0CNlP",modalTitle:"products_modalTitle__S_ejf",modalClose:"products_modalClose__vhnXD",form:"products_form__qV4dG",field:"products_field__UFkJW",fieldRow:"products_fieldRow__KaZyJ",label:"products_label__UEh9P",input:"products_input__y2Oi_",modalActions:"products_modalActions__f3H1c",cancelButton:"products_cancelButton___S2_C",submitButton:"products_submitButton__qjfKU"}},6743:(t,e,a)=>{Promise.resolve().then(a.bind(a,2262))},8915:(t,e,a)=>{"use strict";a.d(e,{db:()=>n,j:()=>d});var r=a(3915),s=a(5404),c=a(5317);let o=(0,r.Wp)({apiKey:"AIzaSyC6gCqV0pKSF5phsUwejPBWZxadZiSDPhQ",authDomain:"trabalhoiverson-7fd18.firebaseapp.com",projectId:"trabalhoiverson-7fd18",storageBucket:"trabalhoiverson-7fd18.firebasestorage.app",messagingSenderId:"913805652641",appId:"1:913805652641:web:7e22d9db6f4663d4ae36e0",measurementId:"G-G0Z5NSJLKX"}),d=(0,s.xI)(o),n=(0,c.aU)(o)}},t=>{var e=e=>t(t.s=e);t.O(0,[272,135,965,670,441,684,358],()=>e(6743)),_N_E=t.O()}]);