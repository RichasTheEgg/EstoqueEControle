(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{1059:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var n=a(5155),o=a(2115),r=a(1188),s=a(5111),d=a(4936),i=a.n(d);function c(e){let{open:t,onOpenChange:a,products:r,onMovementAdded:d}=e,[c,m]=(0,o.useState)({productId:"",type:"entry",quantity:""}),[l,u]=(0,o.useState)(!1),_=async e=>{e.preventDefault(),u(!0);let t=r.find(e=>e.id===c.productId);if(!t)return;let n={productId:c.productId,productName:t.name,type:c.type,quantity:Number.parseInt(c.quantity),date:new Date().toISOString()};if(await (0,s.XV)(n)){let e="entry"===c.type?Number.parseInt(c.quantity):-Number.parseInt(c.quantity);await (0,s.YY)(c.productId,e),d(),m({productId:"",type:"entry",quantity:""}),a(!1)}u(!1)};return t?(0,n.jsx)("div",{className:i().overlay,onClick:()=>a(!1),children:(0,n.jsxs)("div",{className:i().dialog,onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:i().header,children:[(0,n.jsx)("h2",{className:i().title,children:"Nova Movimenta\xe7\xe3o"}),(0,n.jsx)("button",{type:"button",className:i().closeButton,onClick:()=>a(!1),children:"✕"})]}),(0,n.jsxs)("form",{onSubmit:_,className:i().content,children:[(0,n.jsxs)("div",{className:i().form,children:[(0,n.jsxs)("div",{className:i().formGroup,children:[(0,n.jsx)("label",{className:i().label,children:"Produto"}),(0,n.jsxs)("select",{value:c.productId,onChange:e=>m({...c,productId:e.target.value}),className:i().select,required:!0,children:[(0,n.jsx)("option",{value:"",children:"Selecione um produto"}),r.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{className:i().formGroup,children:[(0,n.jsx)("label",{className:i().label,children:"Tipo de Movimenta\xe7\xe3o"}),(0,n.jsxs)("div",{className:i().typeButtons,children:[(0,n.jsx)("button",{type:"button",className:"".concat(i().typeButton," ").concat("entry"===c.type?i().active:""),onClick:()=>m({...c,type:"entry"}),children:"Entrada"}),(0,n.jsx)("button",{type:"button",className:"".concat(i().typeButton," ").concat("exit"===c.type?i().active:""),onClick:()=>m({...c,type:"exit"}),children:"Sa\xedda"})]})]}),(0,n.jsxs)("div",{className:i().formGroup,children:[(0,n.jsx)("label",{className:i().label,children:"Quantidade"}),(0,n.jsx)("input",{type:"number",min:"1",value:c.quantity,onChange:e=>m({...c,quantity:e.target.value}),className:i().input,placeholder:"Digite a quantidade",required:!0})]})]}),(0,n.jsxs)("div",{className:i().footer,children:[(0,n.jsx)("button",{type:"button",className:"".concat(i().button," ").concat(i().buttonSecondary),onClick:()=>a(!1),children:"Cancelar"}),(0,n.jsx)("button",{type:"submit",className:"".concat(i().button," ").concat(i().buttonPrimary),disabled:l,children:l?"Registrando...":"Registrar"})]})]})]})}):null}var m=a(4008),l=a(4573),u=a(8113),_=a.n(u);function v(){let[e,t]=(0,o.useState)([]),[a,d]=(0,o.useState)([]),[i,u]=(0,o.useState)(!1),[v,p]=(0,o.useState)(!0);(0,o.useEffect)(()=>{y()},[]);let y=async()=>{p(!0);let[e,a]=await Promise.all([(0,s.TC)(),(0,s.d$)()]);t(e),d(a),p(!1)};return v?(0,n.jsxs)("div",{className:_().loading,children:[(0,n.jsx)("div",{className:_().spinner}),(0,n.jsx)("p",{children:"Carregando movimenta\xe7\xf5es..."})]}):(0,n.jsxs)("div",{className:_().container,children:[(0,n.jsxs)("div",{className:_().header,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:_().title,children:"Movimenta\xe7\xf5es"}),(0,n.jsx)("p",{className:_().subtitle,children:"Registre entradas e sa\xeddas de estoque"})]}),(0,n.jsxs)("button",{className:_().addButton,onClick:()=>u(!0),children:[(0,n.jsx)(r.A,{size:20}),"Nova Movimenta\xe7\xe3o"]})]}),(0,n.jsxs)("div",{className:_().card,children:[(0,n.jsx)("div",{className:_().cardHeader,children:(0,n.jsx)("h2",{className:_().cardTitle,children:"Hist\xf3rico de Movimenta\xe7\xf5es"})}),(0,n.jsx)("div",{className:_().cardContent,children:0===e.length?(0,n.jsx)("p",{className:_().emptyState,children:"Nenhuma movimenta\xe7\xe3o registrada"}):(0,n.jsx)("div",{className:_().movementList,children:e.map(e=>(0,n.jsxs)("div",{className:_().movementItem,children:[(0,n.jsxs)("div",{className:_().movementLeft,children:[(0,n.jsx)("div",{className:"".concat(_().movementIcon," ").concat("entry"===e.type?_().entry:_().exit),children:"entry"===e.type?"⬆️":"⬇️"}),(0,n.jsxs)("div",{className:_().movementInfo,children:[(0,n.jsx)("h3",{children:e.productName}),(0,n.jsxs)("p",{children:["entry"===e.type?"Entrada":"Sa\xedda"," de ",e.quantity," unidades"]})]})]}),(0,n.jsx)("div",{className:_().movementRight,children:(0,n.jsx)("p",{className:_().movementDate,children:(0,m.GP)(new Date(e.date),"dd 'de' MMMM '\xe0s' HH:mm",{locale:l.F})})})]},e.id))})})]}),(0,n.jsx)(c,{open:i,onOpenChange:u,products:a,onMovementAdded:()=>{y()}})]})}},4936:e=>{e.exports={overlay:"movement-dialog_overlay__igw2U",dialog:"movement-dialog_dialog__AKgxF",header:"movement-dialog_header__ngA04",title:"movement-dialog_title__mQ1Ds",closeButton:"movement-dialog_closeButton__pZLcA",content:"movement-dialog_content__GjiPb",form:"movement-dialog_form__Ojj53",formGroup:"movement-dialog_formGroup__GKZWf",label:"movement-dialog_label__AcdmD",input:"movement-dialog_input__ep9Dt",select:"movement-dialog_select__EoJ3Y",typeButtons:"movement-dialog_typeButtons__94WGD",typeButton:"movement-dialog_typeButton___hWS0",active:"movement-dialog_active__67eN_",footer:"movement-dialog_footer__gwL6z",button:"movement-dialog_button__pQ_pH",buttonPrimary:"movement-dialog_buttonPrimary__hfdKz",buttonSecondary:"movement-dialog_buttonSecondary__Uc_7p"}},5111:(e,t,a)=>{"use strict";a.d(t,{Bj:()=>s,DD:()=>i,TC:()=>c,XV:()=>m,YY:()=>l,d$:()=>r,vc:()=>d});var n=a(8915),o=a(5317);let r=async()=>{try{let e=(0,o.P)((0,o.rJ)(n.db,"products"),(0,o.My)("createdAt","desc"));return(await (0,o.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting products:",e),[]}},s=async e=>{try{let t=new Date().toISOString();return{id:(await (0,o.gS)((0,o.rJ)(n.db,"products"),{...e,createdAt:t,updatedAt:t})).id,...e,createdAt:t,updatedAt:t}}catch(e){return console.error("Error adding product:",e),null}},d=async(e,t)=>{try{let a=(0,o.H9)(n.db,"products",e);return await (0,o.mZ)(a,{...t,updatedAt:new Date().toISOString()}),!0}catch(e){return console.error("Error updating product:",e),!1}},i=async e=>{try{return await (0,o.kd)((0,o.H9)(n.db,"products",e)),!0}catch(e){return console.error("Error deleting product:",e),!1}},c=async()=>{try{let e=(0,o.P)((0,o.rJ)(n.db,"movements"),(0,o.My)("createdAt","desc"));return(await (0,o.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error getting movements:",e),[]}},m=async e=>{try{return{id:(await (0,o.gS)((0,o.rJ)(n.db,"movements"),{...e,createdAt:new Date().toISOString()})).id,...e,createdAt:new Date().toISOString()}}catch(e){return console.error("Error adding movement:",e),null}},l=async(e,t)=>{try{let a=(await r()).find(t=>t.id===e);if(!a)return!1;let n=a.quantity+t;return await d(e,{quantity:n})}catch(e){return console.error("Error updating product quantity:",e),!1}}},8113:e=>{e.exports={container:"movements_container__oypyB",header:"movements_header__Dfabw",title:"movements_title__ayx7V",subtitle:"movements_subtitle__AzOzp",addButton:"movements_addButton__HeRyE",card:"movements_card___aA4_",cardHeader:"movements_cardHeader__aJjgw",cardTitle:"movements_cardTitle__CQu2C",cardContent:"movements_cardContent__VWDbx",emptyState:"movements_emptyState__kEFcw",movementList:"movements_movementList__BhfCG",movementItem:"movements_movementItem__yqATv",movementLeft:"movements_movementLeft__8l0TY",movementIcon:"movements_movementIcon__BdffA",entry:"movements_entry__2L4lU",exit:"movements_exit__s6seW",movementInfo:"movements_movementInfo__1Dwit",movementRight:"movements_movementRight__Cb_gw",movementDate:"movements_movementDate__LljcT",loading:"movements_loading__3Fz5C",spinner:"movements_spinner__evHoP",spin:"movements_spin__Omk_J"}},8145:(e,t,a)=>{Promise.resolve().then(a.bind(a,1059))},8915:(e,t,a)=>{"use strict";a.d(t,{db:()=>i,j:()=>d});var n=a(3915),o=a(5404),r=a(5317);let s=(0,n.Wp)({apiKey:"AIzaSyC6gCqV0pKSF5phsUwejPBWZxadZiSDPhQ",authDomain:"trabalhoiverson-7fd18.firebaseapp.com",projectId:"trabalhoiverson-7fd18",storageBucket:"trabalhoiverson-7fd18.firebasestorage.app",messagingSenderId:"913805652641",appId:"1:913805652641:web:7e22d9db6f4663d4ae36e0",measurementId:"G-G0Z5NSJLKX"}),d=(0,o.xI)(s),i=(0,r.aU)(s)}},e=>{var t=t=>e(e.s=t);e.O(0,[796,135,965,670,71,441,684,358],()=>t(8145)),_N_E=e.O()}]);