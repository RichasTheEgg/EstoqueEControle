(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{2323:(a,e,t)=>{Promise.resolve().then(t.bind(t,8122))},3705:a=>{a.exports={container:"dashboard_container__cBw4N",header:"dashboard_header__PEY2n",title:"dashboard_title__U8_93",subtitle:"dashboard_subtitle__KBBV5",statsGrid:"dashboard_statsGrid__AFqn8",statCard:"dashboard_statCard__4U9PZ",statCardWarning:"dashboard_statCardWarning__QUmup",statCardSuccess:"dashboard_statCardSuccess__cN3hO",statHeader:"dashboard_statHeader__CU1q_",statLabel:"dashboard_statLabel__6mNYN",statIcon:"dashboard_statIcon__QsZVs",statValue:"dashboard_statValue__jfdgX",statDescription:"dashboard_statDescription__o28iG",contentGrid:"dashboard_contentGrid__YC_dv",card:"dashboard_card__FVtd4",cardHeader:"dashboard_cardHeader__2eoxE",cardTitle:"dashboard_cardTitle__Yc7PG",cardContent:"dashboard_cardContent__7lI8w",emptyState:"dashboard_emptyState__iroPH",productList:"dashboard_productList__C0Bd8",productItem:"dashboard_productItem__HAA5m",productInfo:"dashboard_productInfo__ZH1AT",productName:"dashboard_productName__qmK3z",productCategory:"dashboard_productCategory__xVVP1",productDetails:"dashboard_productDetails__5BvMA",productQuantity:"dashboard_productQuantity__8OHPD",productPrice:"dashboard_productPrice__GhhsU",chartContainer:"dashboard_chartContainer__b4YFc",movementStats:"dashboard_movementStats__nJ_2l",movementStat:"dashboard_movementStat__oaHoz",movementIcon:"dashboard_movementIcon__4x_OJ",movementLabel:"dashboard_movementLabel__8UFMV",movementValue:"dashboard_movementValue__pfK_i",loading:"dashboard_loading__50hdb",spinner:"dashboard_spinner__0W0ov",spin:"dashboard_spin__UXRLa"}},5111:(a,e,t)=>{"use strict";t.d(e,{Bj:()=>c,DD:()=>o,TC:()=>i,XV:()=>l,YY:()=>m,d$:()=>d,vc:()=>n});var s=t(8915),r=t(5317);let d=async()=>{try{let a=(0,r.P)((0,r.rJ)(s.db,"products"),(0,r.My)("createdAt","desc"));return(await (0,r.GG)(a)).docs.map(a=>({id:a.id,...a.data()}))}catch(a){return console.error("Error getting products:",a),[]}},c=async a=>{try{let e=new Date().toISOString();return{id:(await (0,r.gS)((0,r.rJ)(s.db,"products"),{...a,createdAt:e,updatedAt:e})).id,...a,createdAt:e,updatedAt:e}}catch(a){return console.error("Error adding product:",a),null}},n=async(a,e)=>{try{let t=(0,r.H9)(s.db,"products",a);return await (0,r.mZ)(t,{...e,updatedAt:new Date().toISOString()}),!0}catch(a){return console.error("Error updating product:",a),!1}},o=async a=>{try{return await (0,r.kd)((0,r.H9)(s.db,"products",a)),!0}catch(a){return console.error("Error deleting product:",a),!1}},i=async()=>{try{let a=(0,r.P)((0,r.rJ)(s.db,"movements"),(0,r.My)("createdAt","desc"));return(await (0,r.GG)(a)).docs.map(a=>({id:a.id,...a.data()}))}catch(a){return console.error("Error getting movements:",a),[]}},l=async a=>{try{return{id:(await (0,r.gS)((0,r.rJ)(s.db,"movements"),{...a,createdAt:new Date().toISOString()})).id,...a,createdAt:new Date().toISOString()}}catch(a){return console.error("Error adding movement:",a),null}},m=async(a,e)=>{try{let t=(await d()).find(e=>e.id===a);if(!t)return!1;let s=t.quantity+e;return await n(a,{quantity:s})}catch(a){return console.error("Error updating product quantity:",a),!1}}},8122:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>_});var s=t(5155),r=t(2115),d=t(4474),c=t(3913),n=t(6025),o=t(6238),i=t(9498),l=t(1368),m=t(5111),h=t(3705),u=t.n(h);function _(){let[a,e]=(0,r.useState)([]),[t,h]=(0,r.useState)([]),[_,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{let[a,t]=await Promise.all([(0,m.d$)(),(0,m.TC)()]);e(a),h(t),p(!1)})()},[]);let b=a.filter(a=>a.quantity<.2*a.maxStock),x=a.reduce((a,e)=>a+e.price*e.quantity,0),v=new Date().getMonth(),j=t.filter(a=>new Date(a.date).getMonth()===v),N=j.filter(a=>"entry"===a.type).length,g=j.filter(a=>"exit"===a.type).length,y=[{name:"Entradas",value:N},{name:"Sa\xeddas",value:g}];return _?(0,s.jsxs)("div",{className:u().loading,children:[(0,s.jsx)("div",{className:u().spinner}),(0,s.jsx)("p",{children:"Carregando dados..."})]}):(0,s.jsxs)("div",{className:u().container,children:[(0,s.jsxs)("div",{className:u().header,children:[(0,s.jsx)("h1",{className:u().title,children:"Dashboard"}),(0,s.jsx)("p",{className:u().subtitle,children:"Vis\xe3o geral do seu estoque"})]}),(0,s.jsxs)("div",{className:u().statsGrid,children:[(0,s.jsxs)("div",{className:u().statCard,children:[(0,s.jsxs)("div",{className:u().statHeader,children:[(0,s.jsx)("span",{className:u().statLabel,children:"Produtos em Estoque"}),(0,s.jsx)("span",{className:u().statIcon,children:"\uD83D\uDCE6"})]}),(0,s.jsx)("div",{className:u().statValue,children:a.length}),(0,s.jsx)("div",{className:u().statDescription,children:"Total de produtos cadastrados"})]}),(0,s.jsxs)("div",{className:"".concat(u().statCard," ").concat(u().statCardWarning),children:[(0,s.jsxs)("div",{className:u().statHeader,children:[(0,s.jsx)("span",{className:u().statLabel,children:"Estoque Baixo"}),(0,s.jsx)("span",{className:u().statIcon,children:"⚠️"})]}),(0,s.jsx)("div",{className:u().statValue,children:b.length}),(0,s.jsx)("div",{className:u().statDescription,children:"Produtos com menos de 20% do estoque"})]}),(0,s.jsxs)("div",{className:"".concat(u().statCard," ").concat(u().statCardSuccess),children:[(0,s.jsxs)("div",{className:u().statHeader,children:[(0,s.jsx)("span",{className:u().statLabel,children:"Valor Total"}),(0,s.jsx)("span",{className:u().statIcon,children:"\uD83D\uDCB0"})]}),(0,s.jsxs)("div",{className:u().statValue,children:["R$ ",x.toFixed(2)]}),(0,s.jsx)("div",{className:u().statDescription,children:"Valor total do estoque"})]})]}),(0,s.jsxs)("div",{className:u().contentGrid,children:[(0,s.jsxs)("div",{className:u().card,children:[(0,s.jsx)("div",{className:u().cardHeader,children:(0,s.jsx)("h2",{className:u().cardTitle,children:"Produtos com Estoque Baixo"})}),(0,s.jsx)("div",{className:u().cardContent,children:0===b.length?(0,s.jsx)("p",{className:u().emptyState,children:"Nenhum produto com estoque baixo"}):(0,s.jsx)("div",{className:u().productList,children:b.map(a=>(0,s.jsxs)("div",{className:u().productItem,children:[(0,s.jsxs)("div",{className:u().productInfo,children:[(0,s.jsx)("p",{className:u().productName,children:a.name}),(0,s.jsx)("p",{className:u().productCategory,children:a.category})]}),(0,s.jsxs)("div",{className:u().productDetails,children:[(0,s.jsxs)("p",{className:u().productQuantity,children:[a.quantity," un."]}),(0,s.jsxs)("p",{className:u().productPrice,children:["R$ ",a.price.toFixed(2)]})]})]},a.id))})})]}),(0,s.jsxs)("div",{className:u().card,children:[(0,s.jsx)("div",{className:u().cardHeader,children:(0,s.jsx)("h2",{className:u().cardTitle,children:"Movimenta\xe7\xf5es do M\xeas"})}),(0,s.jsxs)("div",{className:u().cardContent,children:[(0,s.jsx)("div",{className:u().chartContainer,children:(0,s.jsx)(d.u,{width:"100%",height:200,children:(0,s.jsxs)(c.E,{data:y,children:[(0,s.jsx)(n.W,{dataKey:"name",stroke:"#6b6b85"}),(0,s.jsx)(o.h,{stroke:"#6b6b85"}),(0,s.jsx)(i.m,{contentStyle:{background:"#1a1a24",border:"1px solid #2a2a3a",borderRadius:"0.5rem",color:"#ffffff"}}),(0,s.jsx)(l.y,{dataKey:"value",fill:"#3b82f6",radius:[8,8,0,0]})]})})}),(0,s.jsxs)("div",{className:u().movementStats,children:[(0,s.jsxs)("div",{className:u().movementStat,children:[(0,s.jsx)("span",{className:u().movementIcon,children:"⬆️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:u().movementLabel,children:"Entradas"}),(0,s.jsx)("p",{className:u().movementValue,children:N})]})]}),(0,s.jsxs)("div",{className:u().movementStat,children:[(0,s.jsx)("span",{className:u().movementIcon,children:"⬇️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:u().movementLabel,children:"Sa\xeddas"}),(0,s.jsx)("p",{className:u().movementValue,children:g})]})]})]})]})]})]})]})}},8915:(a,e,t)=>{"use strict";t.d(e,{db:()=>o,j:()=>n});var s=t(3915),r=t(5404),d=t(5317);let c=(0,s.Wp)({apiKey:"AIzaSyC6gCqV0pKSF5phsUwejPBWZxadZiSDPhQ",authDomain:"trabalhoiverson-7fd18.firebaseapp.com",projectId:"trabalhoiverson-7fd18",storageBucket:"trabalhoiverson-7fd18.firebasestorage.app",messagingSenderId:"913805652641",appId:"1:913805652641:web:7e22d9db6f4663d4ae36e0",measurementId:"G-G0Z5NSJLKX"}),n=(0,r.xI)(c),o=(0,d.aU)(c)}},a=>{var e=e=>a(a.s=e);a.O(0,[310,135,965,670,209,441,684,358],()=>e(2323)),_N_E=a.O()}]);